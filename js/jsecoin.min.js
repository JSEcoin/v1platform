function getQueryParams(qs){qs=qs.split("+").join(" ");for(var tokens,params={},re=/[?&]?([^=]+)=([^&]*)/g;tokens=re.exec(qs);)params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);return params}function getCookie(name){var parts=("; "+document.cookie).split("; "+name+"=");if(2==parts.length)return parts.pop().split(";").shift()}function ajaxTestConnection(serverURL,callback){$.ajax({type:"GET",url:serverURL,timeout:3e3,success:function(data,text){callback(!0)},error:function(request,status,error){callback(!1)}})}function checkUser(){function getHoverID(){var q=document.querySelectorAll(":hover");return q&&q.length&&q[q.length-1].id?q[q.length-1].id:!!(q&&q.length&&q[q.length-1].className)&&q[q.length-1].className}function handleMovement(event){var eventDoc,doc,body;null==(event=event||window.event).pageX&&(doc=(eventDoc=event.target&&event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=Math.floor((event.touches&&event.touches[0].clientX||event.clientX||0)+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0)),event.pageY=Math.floor((event.touches&&event.touches[0].clientY||event.clientY||0)+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)));jseTrack.lastX+15>event.pageX&&jseTrack.lastX-15<event.pageX&&jseTrack.lastY+15>event.pageY&&jseTrack.lastY-15<event.pageY&&(jseTrack.movement+=1),jseTrack.lastX=event.pageX,jseTrack.lastY=event.pageY}function increaseTimer(){if(jseTrack.timeOnSite+=1,document.activeElement.id!==jseTrack.lastElement)jseTrack.elementsTracked+=1,jseTrack.lastElement=document.activeElement.id;else{var hoverID=getHoverID();hoverElement!==hoverID&&(jseTrack.elementsTracked+=1,hoverElement=hoverID)}setTimeout(function(){increaseTimer()},1e3)}jseTrack.url=window.location.href,jseTrack.userAgent=navigator.userAgent||0,jseTrack.platform=navigator.platform||0,jseTrack.referrer=document.referrer||0,jseTrack.language=window.navigator.language||0,navigator.languages?jseTrack.languages=navigator.languages.join("")||0:jseTrack.languages=1,jseTrack.timezoneOffset=(new Date).getTimezoneOffset()||0,jseTrack.appName=window.navigator.appName||0,jseTrack.screenWidth=window.screen.width||0,jseTrack.screenHeight=window.screen.height||0,jseTrack.screenDepth=window.screen.colorDepth||0,jseTrack.screen=jseTrack.screenWidth+"x"+jseTrack.screenHeight+"x"+jseTrack.screenDepth,jseTrack.innerWidth=window.innerWidth||0,jseTrack.innerHeight=window.innerHeight||0,jseTrack.deviceMemory=navigator.deviceMemory||navigator.hardwareConcurrency||0,jseTrack.protoString=Object.keys(navigator.__proto__).join("").substring(0,100)||0,jseTrack.initialRating=0,jseTrack.movement=0,jseTrack.timeOnSite=0,jseTrack.elementsTracked=0,jseTrack.timeFactor=0,jseTrack.elementsFactor=0,jseTrack.lastX=0,jseTrack.lastY=0,jseTrack.lastElement=null;var hoverElement=getHoverID();if(jseTrack.firstSeen=(new Date).getTime(),jseTrack.visits=0,localStorage){var localStorageCounter=localStorage.localStorageCounter||0;localStorageCounter=parseInt(localStorageCounter)+1,localStorage.setItem("localStorageCounter",localStorageCounter),localStorageCounter>1&&(jseTrack.visits=localStorageCounter)}jseTrack.webGL=function(){var canvas,ctx;(canvas=document.createElement("canvas")).width=32,canvas.height=32,ctx=canvas.getContext("webgl2")||canvas.getContext("experimental-webgl2")||canvas.getContext("webgl")||canvas.getContext("experimental-webgl")||canvas.getContext("moz-webgl");try{var h=ctx.createBuffer();ctx.bindBuffer(ctx.ARRAY_BUFFER,h);var i=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.7321,0]);ctx.bufferData(ctx.ARRAY_BUFFER,i,ctx.STATIC_DRAW),h.itemSize=3,h.numItems=3;var j=ctx.createProgram(),k=ctx.createShader(ctx.VERTEX_SHADER);ctx.shaderSource(k,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),ctx.compileShader(k);var l=ctx.createShader(ctx.FRAGMENT_SHADER);ctx.shaderSource(l,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),ctx.compileShader(l),ctx.attachShader(j,k),ctx.attachShader(j,l),ctx.linkProgram(j),ctx.useProgram(j),j.vertexPosAttrib=ctx.getAttribLocation(j,"attrVertex"),j.offsetUniform=ctx.getUniformLocation(j,"uniformOffset"),ctx.enableVertexAttribArray(j.vertexPosArray),ctx.vertexAttribPointer(j.vertexPosAttrib,h.itemSize,ctx.FLOAT,!1,0,0),ctx.uniform2f(j.offsetUniform,1,1),ctx.drawArrays(ctx.TRIANGLE_STRIP,0,h.numItems);var m="",n=new Uint8Array(4096);ctx.readPixels(0,0,32,32,ctx.RGBA,ctx.UNSIGNED_BYTE,n),m=JSON.stringify(n).split(/[^0-9]/).join("").split("0").join("").match(/.{1,8}/g);for(var total=1,index=0;index<Math.min(m.length||1024);index+=1)total+=parseFloat(m[index],10);return Number(String(total).substr(2,8))}catch(e){return 0}}(),jseTrack.browserCheck=!1;var isChrome=!!window.chrome&&!!window.chrome.webstore,isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox="undefined"!=typeof InstallTrigger,isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window["safari"]||typeof safari!=="undefined"&&safari.pushNotification).toString(),isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,userAgentLowerCase=jseTrack.userAgent.toLowerCase();return userAgentLowerCase.indexOf("chrome")>-1&&isChrome&&(jseTrack.browserCheck=!0),userAgentLowerCase.indexOf("opera")>-1&&isOpera&&(jseTrack.browserCheck=!0),userAgentLowerCase.indexOf("firefox")>-1&&isFirefox&&(jseTrack.browserCheck=!0),userAgentLowerCase.indexOf("safari")>-1&&isSafari&&(jseTrack.browserCheck=!0),userAgentLowerCase.indexOf("msie")>-1&&isIE&&(jseTrack.browserCheck=!0),userAgentLowerCase.indexOf("edge")>-1&&isEdge&&(jseTrack.browserCheck=!0),document.onmousemove=handleMovement,"ontouchmove"in document.documentElement&&(document.ontouchmove=handleMovement),"ontouchend"in document.documentElement&&(document.ontouchend=function(){jseTrack.movement+=10}),increaseTimer(),jseTrack}function cleanString(stringRaw){var stringClean=String(stringRaw);return stringClean=stringClean.split(/[^ .$*+?\\\-_:/&=,{}@a-zA-Z0-9\s]/).join(""),stringClean=stringClean.substr(0,255)}function calculatePendingTotal(){user.pendingTotal=0,user.pendingSelfMining=0,user.pendingPublisherMining=0,user.pendingAdvertiser=0,user.pendingReferrals=0;var daysPending=0,firstObjectOnly=!0;user.pendingNextPayment=0,user.platformPendingChartData=[],user.publisherPendingChartData=[],user.advertisingPendingChartData=[],user.referralPendingChartData=[];for(var key in user.rewards)user.rewards.hasOwnProperty(key)&&(user.rewards[key].d||(user.rewards[key].s&&(user.pendingTotal+=user.rewards[key].s,user.pendingSelfMining+=user.rewards[key].s,user.platformPendingChartData.push([key,user.rewards[key].s]),firstObjectOnly&&(user.pendingNextPayment+=user.rewards[key].s)),user.rewards[key].p&&(user.pendingTotal+=user.rewards[key].p,user.pendingPublisherMining+=user.rewards[key].p,user.publisherPendingChartData.push([key,user.rewards[key].p]),firstObjectOnly&&(user.pendingNextPayment+=user.rewards[key].p)),user.rewards[key].a&&(user.pendingTotal+=user.rewards[key].a,user.pendingAdvertiser+=user.rewards[key].a,user.advertisingPendingChartData.push([key,user.rewards[key].a]),firstObjectOnly&&(user.pendingNextPayment+=user.rewards[key].a)),user.rewards[key].r&&(user.pendingTotal+=user.rewards[key].r,user.pendingReferrals+=user.rewards[key].r,user.referralPendingChartData.push([key,user.rewards[key].r]),firstObjectOnly&&(user.pendingNextPayment+=user.rewards[key].r)),user.pendingNextPayment>0&&(firstObjectOnly=!1)),daysPending+=1);user.pendingToday=daysPending>6?user.pendingNextPayment:0}function notify(msg){!1===app?($(".notifycontent").html(msg+'<br><button type="button" class="btn btn-sm btn-primary alertbutton" onclick="closeAlert()">OK</button>'),$(".alert").removeClass("hide animated fadeOutUp").addClass("animated fadeInDown")):console.log("NOTIFY: "+msg)}function launchModal(title,content){$("#tmpmodal").modal("show"),$(".modal-title").html(title),$("#tmpmodalbody").html(content)}function isEthAddress(address){return!!/^(0x)?[0-9a-f]{40}$/i.test(address)}function ymd2datepicker(yymmdd){return"20"+yymmdd.substr(0,2)+"-"+yymmdd.substr(2,2)+"-"+yymmdd.substr(4,2)}function datepicker2ymd(datepicker){return datepicker.split("201").join("1").split("202").join("2").split("-").join("")}function shuffle(array){for(var temp,index,counter=array.length;counter>0;)index=Math.floor(Math.random()*counter),temp=array[--counter],array[counter]=array[index],array[index]=temp;return array}function randString(length){return shuffle(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]).join("").slice(0,length)}function copyToClipboard(containerid){if(document.selection){(range=document.body.createTextRange()).moveToElementText(document.getElementById(containerid)),range.select().createTextRange(),document.execCommand("Copy")}else if(window.getSelection){var range;(range=document.createRange()).selectNode(document.getElementById(containerid)),window.getSelection().removeAllRanges(),window.getSelection().addRange(range),document.execCommand("Copy")}$(".copiedresult").html('<i class="fa fa-check fa-2" style="color: green;" aria-hidden="true"></i>')}function timeSince(date){var seconds=Math.floor((new Date-date)/1e3),interval=Math.floor(seconds/31536e3);return interval>1?interval+" years":(interval=Math.floor(seconds/2592e3))>1?interval+" months":(interval=Math.floor(seconds/86400))>1?interval+" days":(interval=Math.floor(seconds/3600))>1?interval+" hours":(interval=Math.floor(seconds/60))>1?interval+" minutes":Math.floor(seconds)+" seconds"}function utcTS2local(TS){return new Date(TS).toLocaleString()}function closeAlert(){$(".alert").removeClass("animated fadeInDown").addClass("animated fadeOutUp"),setTimeout(function(){$(".alert").addClass("hide")},1e3)}function round(value){return Number(Math.round(value+"e8")+"e-8")}function buttonLoading(id){var buttonWidth=$("#"+id).width(),buttonHeight=$("#"+id).height();$("#"+id).html('<img src="img/buttonloading.gif" alt="loading..." style="height: 14px; width: 36px;">'),$("#"+id).width(buttonWidth),$("#"+id).height(buttonHeight)}function goodPassword(pass){for(var score=0,letters=new Object,i=0;i<pass.length;i++)letters[pass[i]]=(letters[pass[i]]||0)+1,score+=5/letters[pass[i]];var variations={digits:/\d/.test(pass),lower:/[a-z]/.test(pass),upper:/[A-Z]/.test(pass)};variationCount=0;for(var check in variations)variationCount+=1==variations[check]?1:0;score+=10*(variationCount-1);var badRoots=["12345","password","qwerty","letmein","football","loveyou","admin","welcome","monkey","login","abc123","starwars","123123","dragon","passw0rd","asdf123","master","hello","freedom","whatever","qazwsx","trustno","54321","jordan","harley"];for(i=0;i<badRoots.length;i++)pass.indexOf(badRoots[i])>-1&&(score/=2);pass.length<6&&(score=0);return["Usuckballz1","Soso123aljg","123qweasdzxc","1qaz2wsx3edc","q1w2e3r4t5y6","1q2w3e4r5t6y","Mailcreated5240","Password1","Sojdlg123aljg","PolniyPizdec0211","7uGd5HIp2J","vSjasnel12","Good123654","zxcasdqwe123","Password123","1qazxsw23edc","PE#5GZ29PTZMSE","3rJs1la7qE","123hfjdk147","421uiopy258","uQA9Ebw445","YAgjecc826","1v7Upjw3nT","d41d8cd98f00b204e9800998ecf8427e","P3Rat54797","qti7Zxh18U","Tnk0Mk16VX","W5tXn36alfW","MaprCheM56458","ka_dJKHJsy6","g9l2d1fzPY","SZ9kQcCTwY","PolniyPizdec110211","5532361cnjqrf","dIWtgm8492","3rJs5la8qE","3rJs1la2qE","CM6E7Aumn9","Groupd2013","OcPOOok325","1q2w3e4r5t6y7u8i9o0p","3Odi15ngxB","&#9679;&#9679;&#9679;&#9679;&#96","3d8Cubaj2E","PolniyPizdec1102","e10adc3949ba59abbe56e057f20f883e","TempPassWord","y6p67FtrqJ","1zn6FpN01x","1b78ef23aa2506f41feecfcc45b66038","5hsU75kpoT","d71lWz9zjS","iw14Fi9jxL","YfDbUfNjH10305070","c43qpul5RZ","b9399f21060d4b5fcb6d3cf5fea8de","H2vWDuBjX4","vRbGQnS997","x4ivygA51F","s8YLPe9jDPvYM","18atcskD2W","asdfghjkl;&#39;","w66YRyBgRa","qweasdzxc123","X3LUym2MMJ","1Fr2rfq7xL","Telechargement","d9Zufqd92N","Qwerty123","8ix6S1fceH","qwegta13091990","1q2w3e4r5t6y7u","scvMOFAS79","7253497a5e31bd64","827ccb0eea8a706c4c34a16891f84e7b","6V21wbgad","linkedin2011","asdfghjkl123","5plK4L5Uc7","mV46VkMz10","W5tn36alfW","qdujvyG5sxa","pakistan123","jamesbond007","dfg5Fhg5VGFh1","XBLhInTB9w","J1V1fp2BXm","couponSC10","5X1CJdsb9p","1q2w3e4r5t6y7u8i","rbOTmvZ954","playstation3","yfdbufnjh63","Sample123","fxzZ75yer","wsbe279qSG","1q2w3e4r5t6y7u8i9o","pazzword123","owt243yGbJ","Eh1K9oh335","319f4d26e3c536b5dd871bb2c52e3178","Password01","8PHroWZ624","iw14Fi9jwQa","skateboarding","playstation2"].indexOf(pass)>-1&&(score=0),score>60}function generateIdenticon(publicKey,containerDivID,size){var identiconParts={};identiconParts.background=9,identiconParts.legs=6,identiconParts.arms=8,identiconParts.neck=3,identiconParts.hat=9,identiconParts.body=7,identiconParts.head=8,identiconParts.eyes=9,identiconParts.logo=8;var identiconFiles={},charCount=4;for(var key in identiconParts)if(identiconParts.hasOwnProperty(key)){for(var charCode=publicKey.charCodeAt(charCount),identCode=1,tmpCode=0;tmpCode<=charCode;)tmpCode+=1,(identCode+=1)>identiconParts[key]&&(identCode=1);identiconFiles[key]="img/identicons/"+key+identCode+".png",charCount++}for(var key in identiconFiles)identiconFiles.hasOwnProperty(key)&&($("#"+containerDivID).html($("#"+containerDivID).html()+'<img src="'+identiconFiles[key]+'" class="identicon-layer" style="z-index: '+charCount+"; height: "+size+"; width: "+size+';" />'),charCount++)}function identiconClick(){launchModal("About Your Identicon",'Identicons are images generated from your public key. This helps give a visual representation of your unique public key which is more recognisable to the human eye than a series of alphanumeric characters.<br><br>At JSEcoin we have chosen to use robots for our identicons because they are gender neutral and provide a good balance between personable characters and professionalism.<br><br>We hope you like your new identicon!<br><br><div id="identicon-modal" onclick="notify(\'<div class=breakword>Hello I am your identicon for public key:<br>'+user.publicKey+"</div>');\"></div>"),generateIdenticon(user.publicKey,"identicon-modal","400px")}function validateEmail(email){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}function checkAuth(){return!(!user||!user.session)||(!1===app&&(document.location.href="https://platform.jsecoin.com"),!1)}function drawBasicChart(id,data){$.plot($("#"+id),[{data:data,color:"#2F4050",bars:{show:!0,align:"center",lineWidth:1}}],{xaxes:[{mode:"categories"}],yaxes:[{min:0,tickDecimals:0,axisLabel:"JSE",axisLabelUseCanvas:!0}],legend:{position:"sw"},colors:["#1ab394"],grid:{color:"#999999",hoverable:!0,clickable:!0,tickColor:"#D4D4D4",borderWidth:0,hoverable:!0},tooltip:!0,tooltipOpts:{cssClass:"chartTooltips",content:"%y JSE",onHover:function(flotItem,$tooltipEl){}}})}function loadScripts(){$.getScript("js/jsecrypto.js",function(data,textStatus,jqxhr){}),$.getScript("js/plugins/flot/jquery.flot.time.js",function(data,textStatus,jqxhr){}),$.getScript("js/plugins/flot/jquery.flot.tooltip.min.js",function(data,textStatus,jqxhr){}),$.getScript("js/plugins/flot/jquery.flot.categories.js",function(data,textStatus,jqxhr){})}function loadScript(url,alreadyLoaded,callback){if(!0===alreadyLoaded)callback();else{var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.src=url,script.onreadystatechange=callback,script.onload=callback,head.appendChild(script)}}function startSocketIOConnection(){loadScript(socketIOAddress,ioLoaded,function(){!0!==ioLoaded?(console.log("Loaded "+socketIOAddress),miningLog("Loaded "+socketIOAddress)):console.log("Rebooting socket.io connection"),ioLoaded=!0,window.JSEsocket&&(window.JSEsocket.disconnect(),window.JSEsocket.destroy()),window.JSEsocket=io.connect(jseLoadServer,{secure:!0}),window.onbeforeunload=function(e){window.JSEsocket.disconnect(),window.JSEsocket.destroy()},window.JSEsocket.on("connect_error",function(exception){console.log("JSE SOCKET ERROR: "+JSON.stringify(exception)),miningLog("JSE SOCKET ERROR: "+JSON.stringify(exception)),console.log("Restarting in 15 seconds"),miningLog("Restarting in 15 seconds"),window.JSEsocket.disconnect(),window.JSEsocket.destroy(),setTimeout(function(){startSocketIOConnection()},15e3)}),window.JSEsocket.on("connect",function(){window.JSEsocket.emit("registerSession",user.uid,user.session,function(socketioResponse){!0===socketioResponse?console.log("Successfully registered socket.io session"):console.log("Error 551 socket.io registration problem")}),setTimeout(function(){$.ajax({url:jseLoadServer+"/appid/316d4bfc8dd7/",type:"GET",contentType:"text/plain"}).done(function(data){appHash=data.substring(0,16).toLowerCase()})},45e3)}),window.JSEsocket.once("connect",function(){console.log("JSE Socket Connected!"),miningLog("JSE Socket Connected!");var socketConnectionMade=document.createEvent("Event");socketConnectionMade.initEvent("socketConnectionMade",!0,!0),document.dispatchEvent(socketConnectionMade),window.JSEsocket.on("disconnect",function(){console.log("JSE Socket Disconnect"),miningLog("JSE Socket Disconnect")}),window.JSEsocket.on("firstPreHash",function(blockPreHash){console.log("JSE Initial Data Received: "+blockPreHash),miningLog("JSE Initial Data Received: "+blockPreHash),preHash=blockPreHash,window.lastPreHashReceived=(new Date).getTime()}),window.JSEsocket.on("blockPreHash",function(blockPreHash){console.log("JSE Data Received: "+blockPreHash),miningLog("JSE Data Received: "+blockPreHash),preHash=blockPreHash,window.hashesFoundThisBlock=0,window.lastPreHashReceived=(new Date).getTime()}),window.JSEsocket.on("userUpdate",function(updateReason,updateData){"blockUpdate"==updateReason&&refreshUser(function(){"mining.html"==currentPage?(miningLog("Transaction found in the latest block :)"),0==quitMining&&$(".miningtable").length&&redrawMiningPage()):"funds.html"==currentPage&&loadFunds(),console.log("Transaction found in the latest block :)")})})})})}function register(){if(!$("#newterms").is(":checked"))return notify("You need to agree to terms"),!1;if($("#newemail").val()!==$("#retypeemail").val())return notify("Email addresses do not match"),!1;var newUser={};if(newUser.name=cleanString($("#newname").val()),newUser.email=cleanString($("#newemail").val()),!validateEmail(newUser.email))return notify("Email invalid, please check your email address"),!1;for(var badEmailProviders=["jsecoin.com","jsecoins.com","cobin2hood.com","mailinator","luxusmail","inboxalias","maildrop.cc","guerrillamail","tm2mail.com","muimail.com","hitbts.com","minex-coin.com","c1oramn.com","balanc3r.com","c1oramn.com","letsmail9.com","crymail2.com","ax80mail.com"],i=badEmailProviders.length-1;i>=0;i--)if(newUser.email.indexOf(badEmailProviders[i])>-1)return notify("Temporary email addresses will be closed, please use your real address"),!1;if(newUser.password=$("#newpassword").val(),!goodPassword(newUser.password))return notify("You need to use a stronger password"),!1;newUser.address=cleanString($("#newaddress").val()),newUser.country=cleanString($("#newcountry").val()),newUser.preRegHashes=0;var localTime=new Date;newUser.localTS=localTime.getTime(),newUser.timeOffset=localTime.getTimezoneOffset(),newUser.regTime=newUser.localTS-scriptLoadTS,newUser.language=window.navigator.userLanguage||window.navigator.language,newUser.screen=screen.width+"x"+screen.height,newUser.platform=app||"platform",newUser.userAgent=navigator.userAgent||app||"unknown",document.cookie.indexOf("utmSource")>-1&&(newUser.source=getCookie("utmSource")),document.cookie.indexOf("utmCampaign")>-1&&(newUser.source=getCookie("utmCampaign")),document.cookie.indexOf("utmContent")>-1&&(newUser.source=getCookie("utmContent")),localStorage&&localStorage.utmSource&&(newUser.source=localStorage.utmSource),localStorage&&localStorage.utmCampaign&&(newUser.campaign=localStorage.utmCampaign),localStorage&&localStorage.utmContent&&(newUser.content=localStorage.utmContent),get.utm_source&&(newUser.source=get.utm_source),get.utm_campaign&&(newUser.campaign=get.utm_campaign),get.utm_content&&(newUser.content=get.utm_content),localStorage&&localStorage.jseUnique&&(newUser.jseUnique=localStorage.jseUnique),$("body").append(conversionTags),$.ajax({url:jseServer+"/register/",type:"POST",contentType:"application/json",data:JSON.stringify(newUser)}).done(function(data){return(user=JSON.parse(data)).fail?(notify(user.notification),delete user,grecaptcha.reset(),!1):($(".loginout1").html('<a href="javascript:void(0)"  onclick="logOut();"><i class="fa fa-sign-out"></i> Log Out</a>'),$(".loginout2").html('<a href="javascript:void(0)" onclick="logOut();" data-toggle="tooltip" title="Log Out"><i class="fa fa-sign-out"></i> <span class="nav-label">Log Out</span></a>'),loadScripts(),loadDashboard(),startSocketIOConnection(),!1)}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&(notify(failObj.notification),delete user),!1})}function confirmAccount(){var strippedUID=parseInt(get.uid,10),cleanCode=cleanString(get.confirmcode),jT=checkUser(),recaptchaResponse=grecaptcha.getResponse();return void 0===recaptchaResponse||""===recaptchaResponse||null===recaptchaResponse?(notify('Complete the ReCaptcha "I am not a robot"'),grecaptcha.reset(),!1):(jT["g-recaptcha-response"]=recaptchaResponse,console.log("posting"),$.ajax({url:jseServer+"/confirm/"+strippedUID+"/"+cleanCode+"/",type:"POST",contentType:"application/json",data:JSON.stringify(jT)}).done(function(data){var res=JSON.parse(data);if(res.fail)return notify(res.notification),grecaptcha.reset(),!1;notify("Thank you for confirming your account"),setTimeout(function(){window.location="https://platform.jsecoin.com/"},1500)}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),grecaptcha.reset(),!1}),!1)}function login(){var credentials={};if(credentials.email=cleanString($("#loginemail").val()),credentials.password=$("#loginpassword").val(),credentials.authCode=$("#authcode").val()||void 0,localStorage&&localStorage.jseUnique&&(credentials.jseUnique=localStorage.jseUnique),credentials.initial=1,credentials.screen=screen.width+"x"+screen.height,credentials.platform=app||"platform",credentials.userAgent=navigator.userAgent||app||"unknown","undefined"!=typeof grecaptcha&&(credentials["g-recaptcha-response"]=grecaptcha.getResponse(),void 0===credentials["g-recaptcha-response"]||""===credentials["g-recaptcha-response"]||null===credentials["g-recaptcha-response"]))return notify('Complete the ReCaptcha "I am not a robot"'),!1;if(credentials.email)try{$.ajax({url:jseServer+"/login/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){if((user=JSON.parse(data)).fail)return notify(user.notification),user.resetForm&&($("#authcode").val(void 0),$("#tmpmodal").modal("hide")),user={},"undefined"!=typeof grecaptcha&&grecaptcha.reset(),!1;if(user.msg2fa){return launchModal("Two Factor Authentication",user.msg2fa+'<br><br><form class="m-t" role="form" action="javascript:void(0)" onsubmit="login()"><div class="form-group"><input type="text" autofocus="autofocus" id="authcode" class="form-control w300c" placeholder="6 Digit Auth Code" autocomplete="off" required=""></div><button type="submit" class="btn btn-primary block m-b w300c">Submit Code</button></form><br><small>(Please note there is a 30 second window to submit your code)'),!1}return user.confirmed||notify('You need to confirm your email address using the link provided in the registration email<br><br><a href="https://server.jsecoin.com/resendwelcome/'+user.uid+"/"+user.email+'/" target="_blank">Resend Welcome Email</a><br><br>If you still are not receiving the welcome email please add noreply@jsecoin.com to your address book and check any junk mail folders.'),$("#checkout-login-container").length?(merchantCheckoutLogin(),$("#tmpmodal").modal("hide")):($(".loginout1").html('<a href="javascript:void(0)"  onclick="logOut();"><i class="fa fa-sign-out"></i> Log Out</a>'),$(".loginout2").html('<a href="javascript:void(0)" onclick="logOut();" data-toggle="tooltip" title="Log Out"><i class="fa fa-sign-out"></i> <span class="nav-label">Log Out</span></a>'),$("#tmpmodal").modal("hide"),$(".systemmessage").html(user.systemMessage),$(window).width()<768&&($("body").addClass("mini-navbar"),SmoothlyMenu()),loadScripts(),loadDashboard(),startSocketIOConnection()),!1}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}catch(ex){console.log("Session/Login Error: 379")}else!1===app&&(document.location.href="https://platform.jsecoin.com")}function setup2fa(){if(checkAuth()){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/twofa/setup2fa/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){launchModal("Scan This Code",'<div style="margin: 10px auto; text-align: center;"><div class="qrcontainer"><div id="qrcode" style="width:166px; height:166px; margin: 0 auto;"></div></div><div id="secret-backup"></div><br>Scan with <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en" target="_blank">Google Authenticator</a> or <a href="https://authy.com/download/" target="_blank">Authy App</a><br><br></div><form class="m-t" role="form" action="javascript:void(0)" onsubmit="test2fa()"><div class="form-group"><input type="text" id="authcode" class="form-control w300c" placeholder="6 Digit Auth Code" required=""></div><button type="submit" class="btn btn-primary block m-b w300c">Setup Two Factor Authentication</button></form>');var qrElement=new QRCode(document.getElementById("qrcode"),{width:166,height:166}),returnObject=JSON.parse(data);if(returnObject.fail)return notify(returnObject.notification),!1;qrElement.makeCode(returnObject.authuri);var secretBackup=returnObject.authuri.split("secret=")[1].split("&")[0];$("#secret-backup").html('<div style="font-weight: bold; font-size: 18px; margin-top: 5px;">'+warningSign+" Please make a note of your back up key "+warningSign+'</div>Without this key if you lose your phone you will not be able to access to your account<br><div style="font-weight: bold; font-size: 18px; margin-top: 5px;">'+secretBackup+"</div>")}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}}function restore2fa(){$("#qrcode").html("");var otURL="otpauth://totp/JSEcoin:"+$("#restore-email").val()+"?secret="+$("#restore-secret").val()+"&issuer=JSEcoin&algorithm=SHA1&digits=6&period=30";new QRCode(document.getElementById("qrcode"),{width:166,height:166}).makeCode(otURL)}function test2fa(){var credentials={};credentials.session=user.session,credentials.authCode=$("#authcode").val(),$.ajax({url:jseServer+"/twofa/test2fa/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);return returnObject.fail?(notify(returnObject.notification),setup2fa(),!1):returnObject.success?(notify(returnObject.notification),$("#tmpmodal").modal("hide"),refreshUser(function(){loadDashboard()}),!1):void 0}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&(notify(failObj.notification),setup2fa()),!1})}function remove2fa(){launchModal("Remove Two Factor Authentication",'<h4>Enter your two factor authentication code to remove 2fa from your account</h4><form class="m-t" role="form" action="javascript:void(0)" onsubmit="testRemove2fa()"><div class="form-group"><input type="text" id="authcode" class="form-control w300c" placeholder="6 Digit Auth Code" required=""></div><button type="submit" class="btn btn-primary block m-b w300c">Remove Two Factor Auth</button></form>')}function testRemove2fa(){var credentials={};credentials.session=user.session,credentials.authCode=$("#authcode").val(),$.ajax({url:jseServer+"/twofa/remove2fa/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);return returnObject.fail?(notify(returnObject.notification),remove2fa(),!1):returnObject.success?(notify(returnObject.notification),$("#tmpmodal").modal("hide"),refreshUser(function(){loadDashboard()}),!1):void 0}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&(notify(failObj.notification),remove2fa()),!1})}function resetPassword(){var credentials={};return credentials.email=cleanString($("#resetemail").val()),credentials["g-recaptcha-response"]=grecaptcha.getResponse(),void 0===credentials["g-recaptcha-response"]||""===credentials["g-recaptcha-response"]||null===credentials["g-recaptcha-response"]?(notify('Complete the ReCaptcha "I am not a robot"'),!1):($.ajax({url:jseServer+"/password/reset/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail?notify(returnObject.notification):notify("Password reset code has been sent to you, please check your email at: "+credentials.email)}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1}),!1)}function changePassword(){var credentials={};return credentials.email=cleanString($("#resetemail").val()),$("#newpassword").val()!==$("#retypepassword").val()?(notify("Passwords do not match"),!1):(credentials.newPassword=$("#newpassword").val(),credentials.passwordReset=$("#passwordreset").val(),goodPassword(credentials.newPassword)?($.ajax({url:jseServer+"/password/change/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail?notify(returnObject.notification):(notify("Password has been changed, please log in with your new password"),!1===app&&(document.location.href="https://platform.jsecoin.com"))}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1}),!1):(notify("You need to use a stronger password"),!1))}function checkPinSafe(){$("#new-pin").val($("#new-pin").val().split(/[^0-9]/).join("")),$("#new-pin").val().length>=4&&$("#new-pin").val().length<=12&&"1234"!==$("#new-pin").val()&&"12345"!==$("#new-pin").val()&&"123456"!==$("#new-pin").val()&&"0000"!==$("#new-pin").val()&&"1111"!==$("#new-pin").val()&&"2222"!==$("#new-pin").val()&&"3333"!==$("#new-pin").val()&&"4444"!==$("#new-pin").val()&&"5555"!==$("#new-pin").val()&&"6666"!==$("#new-pin").val()&&"7777"!==$("#new-pin").val()&&"8888"!==$("#new-pin").val()&&"9999"!==$("#new-pin").val()?($("#new-pin").removeClass("redInput"),$("#new-pin").addClass("greenInput")):($("#new-pin").removeClass("greenInput"),$("#new-pin").addClass("redInput"))}function setPin(){var credentials={};if(credentials.session=user.session,$("#new-pin").val()!==$("#new-pin2").val())return notify("Pin numbers do not match, please check and try again"),!1;credentials.pin=$("#new-pin").val().split(/[^0-9]/).join(""),$.ajax({url:jseServer+"/account/setpin/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.success&&$("#tmpmodal").modal("hide"),notify(returnObject.notification)}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function showAPIKey(){checkPin(function(){var credentials={};credentials.session=user.session,credentials.pin=getPin(),$.ajax({url:jseServer+"/account/getapikey/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification),returnObject.apiKey&&(user.apiKey=returnObject.apiKey,$("#apikey").toggleClass("hide").html(user.apiKey),$("#additional-api-buttons").toggleClass("hide"))}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})})}function resetAPIKey(){confirm("Are you sure you want to reset your API key? Previous keys will no longer work.")&&checkPin(function(){var credentials={};credentials.session=user.session,credentials.pin=getPin(),$.ajax({url:jseServer+"/account/resetapikey/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification),returnObject.newAPIKey&&(user.apiKey=returnObject.newAPIKey,$("#apikey").html(user.apiKey))}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})})}function updateAPILevel(){checkPin(function(){var newAPILevel=parseFloat($("#apilevel").val()),credentials={};credentials.session=user.session,credentials.newAPILevel=newAPILevel,credentials.pin=getPin(),$.ajax({url:jseServer+"/account/updateapilevel/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){refreshUser(function(){loadSettings()})}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})})}function checkPinFunction(){notify("Pin number function error ref 912"),$(".check-pin-container").addClass("hide")}function checkPin(callback){$("#content").length?$(".check-pin").css("left",$("#content").innerWidth()/2-155+($("body").innerWidth()-$("#content").innerWidth())):$(".check-pin").css("left",$("body").innerWidth()/2-155),$(".check-pin-container").removeClass("hide"),$(".check-pin").addClass("animated zoomInDown"),$("#pin").focus(),checkPinFunction=function(){$("#pin").val()&&callback()},$("#pin").off("keydown"),$("#pin").on("keydown",function(e){13==e.which&&checkPinFunction()})}function getPin(){var pin=cleanString($("#pin").val());return $("#pin").val(""),$(".check-pin-container").addClass("hide"),pin}function forgotPin(){$(".check-pin-container").addClass("hide"),launchModal("Forgotton Your Pin?",'Your pin is a 4-12 digit number that is a security feature to prevent loss of funds from users who have compromised email accounts. For this reason it is not possible to reset your pin number. Users get three attempts per six hour period to guess pin numbers that may have been forgotten. We recommend trying common numbers, dates, years as most people will use a number that is already familiar to them. This is a screenshot of the pin setup screen in case it jogs any memories.<br><br><img src="https://jsecoin.com/misc/pin.png" class="img-responsive img-rounded" alt="pin number screenshot" />')}function cancelPin(){return $("#pin").val(""),$(".check-pin-container").addClass("hide"),!1}function updateDetails(){checkPin(function(){var credentials={};credentials.session=user.session,credentials.newName=cleanString($("#newname").val()),credentials.newAddress=cleanString($("#newaddress").val()),credentials.pin=getPin(),$.ajax({url:jseServer+"/account/updatedetails/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){refreshUser(function(){loadSettings()})}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})})}function logOut(){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/logout/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){user={},!1===app&&(document.location.href="https://platform.jsecoin.com"),void 0!==window.JSEsocket&&(window.JSEsocket.disconnect(),window.JSEsocket.destroy())}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function refreshUser(callback){var credentials={};credentials.session=user.session,!1!==app&&(credentials.app=app);for(var dontRefresh=["campaigns","advStats","pubStats"],dontRefreshStore={},i=0;i<dontRefresh.length;i++)user[dontRefresh[i]]&&(dontRefreshStore[dontRefresh[i]]=user[dontRefresh[i]]);$.ajax({url:jseServer+"/login/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){user=JSON.parse(data);for(var i=0;i<dontRefresh.length;i++)user[dontRefresh[i]]=dontRefreshStore[dontRefresh[i]];document.dispatchEvent(userDataRefresh),user.session||$.ajax({url:jseServer+"/login/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){user=JSON.parse(data);for(var i=0;i<dontRefresh.length;i++)user[dontRefresh[i]]=dontRefreshStore[dontRefresh[i]];return document.dispatchEvent(userDataRefresh),user.session?(callback(),!0):(!1===app&&(document.location.href="https://platform.jsecoin.com"),!1)}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1}),callback()})}function checkForUser(){user&&refreshUser(function(){}),(refreshTime+=.05*refreshTime)>18e5&&(refreshTime=36e5),setTimeout(function(){checkForUser()},refreshTime)}function confirmTransfer(){var toUser=cleanString($("#touser").val()),toAmount=parseFloat($("#toamount").val()),toReference=cleanString($("#toreference").val().split(/[^ \.,@a-zA-Z0-9]/).join(""));if(user.balance<toAmount)return notify("Insufficient balance to complete transfer"),!1;if(0==user.confirmed)return notify("You need to confirm your account before you send a transaction. Please check the email address provided and click the confirmation link in the welcome email."),!1;if(toAmount<1e-6)return notify("Amount to send is below the minimum 0.000001 JSE."),!1;if(!toAmount)return notify("You need to enter an amount transfer"),!1;if(isNaN(toAmount))return notify("Error amount to transfer is not recognised"),!1;if(locked)return notify("Account locked pending transaction, please try again in 20 seconds"),!1;if(confirm("Do you wish to send "+toAmount+" to "+toUser+"? Reference: "+toReference)){locked=!0,setTimeout(function(){locked=!1},1e4);var credentials={};credentials.session=user.session,credentials.toUser=toUser,credentials.toAmount=toAmount,credentials.toReference=toReference,launchModal("Sending "+toAmount+" JSE to "+toUser,"Requesting Data To Sign...<br><br>"),$.ajax({url:jseServer+"/push/requesttransfer/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);if(returnObject.fail)return notify(returnObject.notification),$("#tmpmodal").modal("hide"),!1;$("#tmpmodalbody").append("Received Data To Sign: "+data.length+" bytes<br><br>"),signData(data,user,function(signed){$("#tmpmodalbody").append("<h5>Signing Transaction Data with ECDSA Cryptography</h5>Public Key: "+signed.publicKey+"<br><br>SHA256 HASH: "+signed.hash+"<br><br>Signature: "+signed.signature+"<br><br>"),$("#tmpmodal").modal("hide"),checkPin(function(){signed.session=user.session,signed.pin=getPin(),$.ajax({url:jseServer+"/push/data/",type:"POST",contentType:"application/json",data:JSON.stringify(signed)}).done(function(returnData){var returnObject2=JSON.parse(returnData);returnObject2.fail?notify("Server received signed data but transaction failed:<br>"+returnObject2.notification):returnObject2.success?notify("Transaction Completed Successfully"):notify(returnObject2.notification),refreshUser(function(){loadTransfer()})}).fail(function(data3){var failObj=JSON.parse(data3.responseText);return failObj&&failObj.notification&&notify(failObj.notification),$("#tmpmodal").modal("hide"),!1})})})}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),$("#tmpmodal").modal("hide"),!1})}}function exportCoins(){var exportAmount=parseFloat($("#exportamount").val());if(!exportAmount)return notify("You need to enter an amount to export"),!1;if(user.balance<exportAmount)return notify("Insufficient balance to complete export"),!1;if(0==user.confirmed)return notify("You need to confirm your account before you export tokens. Please check the email address provided and click the confirmation link in the welcome email."),!1;if(exportAmount<1e-6)return notify("Amount to send is below the minimum 0.000001 JSE."),!1;if(locked)return notify("Account locked pending transaction, please try again in 20 seconds"),!1;if(confirm("Do you wish to export "+exportAmount+" JSE")){locked=!0,setTimeout(function(){locked=!1},1e4);var credentials={};credentials.session=user.session,credentials.exportAmount=exportAmount,launchModal("Exporting "+exportAmount+" JSE","Sending export request to server...<br><br>"),$.ajax({url:jseServer+"/push/requestexport/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);return returnObject.fail?(notify(returnObject.notification),$("#tmpmodal").modal("hide"),!1):isNaN(exportAmount)?(notify("Error amount to export is not recognised"),!1):($("#tmpmodalbody").append("Received Data To Sign: "+data.length+" bytes<br><br>"),void signData(data,user,function(signed){$("#tmpmodalbody").append("<h5>Signing Transaction Data with ECDSA Cryptography</h5>Public Key: "+signed.publicKey+"<br><br>SHA256 HASH: "+signed.hash+"<br><br>Signature: "+signed.signature+"<br><br>"),$("#tmpmodal").modal("hide"),checkPin(function(){signed.session=user.session,signed.pin=getPin(),$.ajax({url:jseServer+"/push/data/",type:"POST",contentType:"application/json",data:JSON.stringify(signed)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail?notify("Server received signed data but transaction failed:<br>"+returnObject.notification):returnObject.success?launchModal("Exported Coin Code",'<h4>Your export code is:</h4><div class="linkbox">'+returnObject.coinCode+"</div>"):notify(returnObject.notification),refreshUser(function(){loadExport()})}).fail(function(data3){var failObj=JSON.parse(data3.responseText);return failObj&&failObj.notification&&notify(failObj.notification),$("#tmpmodal").modal("hide"),!1})})}))}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),$("#tmpmodal").modal("hide"),!1})}}function importCoins(){var coinCode=cleanString($("#importcode").val());if(!coinCode||void 0===coinCode||""==coinCode)return notify("You need to enter a coin code"),!1;if(0==user.confirmed)return notify("You need to confirm your account before you import tokens. Please check the email address provided and click the confirmation link in the welcome email."),!1;if(locked)return notify("Account locked pending transaction, please try again in 20 seconds"),!1;coinCode=String(coinCode).trim(),locked=!0,setTimeout(function(){locked=!1},1e4);var credentials={};credentials.session=user.session,credentials.coinCode=coinCode,$.ajax({url:jseServer+"/push/import/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail?notify(returnObject.notification):(notify("Imported "+returnObject.value+" JSE"),refreshUser(function(){loadExport()}))}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function getCode(){if(!$("#pub-setup-terms").is(":checked"))return notify("You need to agree to terms"),!1;var advertising=!0;$("#pub-setup-advertising").is(":checked")||(advertising=!1);var newSite=$("#pub-setup-site").val();if(!newSite||void 0===newSite||""==newSite)return notify("You need to enter a domain name"),!1;if(-1==newSite.indexOf("."))return notify("You need to enter a valid domain name"),!1;if((newSite=String(newSite).toLowerCase().split("http://").join("").split("https://").join("").split("www.").join("")).indexOf("/")>-1){var newSiteSplit=newSite.split("/");newSite=newSiteSplit[0]}var subID=$("#pub-setup-subid").val()||"0";subID=cleanString(String(subID)),$("#pub-setup-site").val(newSite),$("#pub-setup-subid").val(subID);var additionalOptions="";$("#pub-setup-darkmode").is(":checked")&&(additionalOptions+="window.JSEDarkMode=1;"),"top"===$("#pub-setup-position").val()&&(additionalOptions+="window.JSETopNotification=1;"),"auto"!==$("#pub-setup-language").val()&&(additionalOptions+='window.JSESetLanguage="'+$("#pub-setup-language").val()+'";'),$("#pub-setup-advertising").is(":checked")?("auto"!==$("#pub-setup-select-category").val()&&(additionalOptions+="window.JSEManualCategory="+$("#pub-setup-select-category").val()+";"),$("#pub-setup-autobanner-top").is(":checked")||(additionalOptions+="window.JSENoAutoBannerTop=1;"),$("#pub-setup-autobanner-bottom").is(":checked")||(additionalOptions+="window.JSENoAutoBannerBottom=1;"),$("#pub-setup-intext").is(":checked")||(additionalOptions+="window.JSENoInText=1;"),$("#pub-setup-block").val().length>1&&(additionalOptions+='window.JSEBlockedAdvertisers="'+$("#pub-setup-block").val().split(/\s/).join(",").split(/[^0-9,]/).join("")+'";')):additionalOptions+="window.JSENoAds=1;",$("#pub-setup-no-mining").is(":checked")&&(additionalOptions+="window.JSENoMining=1;");var credentials={};credentials.session=user.session,credentials.newSite=newSite,credentials.subID=subID,credentials.advertising=advertising,$.ajax({url:jseServer+"/newsite/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);if(returnObject.fail)notify(returnObject.notification);else{launchModal("Copy and paste this code just above the closing &lt;/body&gt; tag",'<div class="breakword"><xmp class="codeformat" id="sitecode">'+('<script type="text/javascript">\n!function(){'+additionalOptions+'var e=document,t=e.createElement("script"),s=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=t.defer=!0,t.src="https://load.jsecoin.com/load/'+user.uid+"/"+newSite+"/"+subID+'/0/",s.parentNode.insertBefore(t,s)}();\n<\/script>')+'</xmp><br><hr><button class="btn btn-sm btn-primary" onclick="copyToClipboard(\'sitecode\'); $(this).addClass(\'animated tada\');">Copy to Clipboard</button> <span class="copiedresult"></span></div>')}}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function removeStats(what,ref){var credentials={};credentials.session=user.session,credentials.what=cleanString(what),credentials.ref=cleanString(ref),confirm("Are you sure you want to permanently remove this "+credentials.what.substring(0,credentials.what.length-1)+" reference "+credentials.ref+"?")&&$.ajax({url:jseServer+"/account/removestats/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){loadPublishers()}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function sharePopUp(){launchModal("Here is your referral link, tell your friends about JSEcoin and earn more JSE",'<div class="breakword"><xmp class="codeformat" id="sharelink">'+("https://platform.jsecoin.com/?lander=3&utm_source=referral&utm_campaign=aff"+user.uid+"&utm_content=")+'</xmp><br><hr><button class="btn btn-sm btn-primary" onclick="copyToClipboard(\'sharelink\'); $(this).addClass(\'animated tada\');">Copy to Clipboard</button><span class="copiedresult"></span>  <button class="btn btn-sm btn-primary" onclick="loadReferrals(); $(\'#tmpmodal\').modal(\'hide\');">More Links &amp; Full Terms</button> <button class="btn btn-sm btn-primary" onclick="socialPopUp(\'facebook\');"><i class="fa fa-facebook-square" aria-hidden="true"></i> Share on Facebook</button> <button class="btn btn-sm btn-primary" onclick="socialPopUp(\'twitter\');"><i class="fa fa-twitter-square" aria-hidden="true"></i> Tweet</button></div>')}function socialPopUp(socialNetwork){var encodedAffLink=encodeURIComponent("https://platform.jsecoin.com/?lander=3&utm_source=referral&utm_campaign=aff"+user.uid+"&utm_content=socialshare");if("facebook"==socialNetwork)var socialURL="https://www.facebook.com/sharer/sharer.php?u="+encodedAffLink;else{var shuffledTwitterText=shuffle(["Now anyone can mine cryptocurrency with JSEcoin","I am earning cryptocurrency with JSEcoin","JSEcoin - Browser based cryptocurrency mining","Anyone can mine cryptocurrency right now","New web based mining technology JSEcoin"]),shuffledHashTags1=shuffle(["cryptocurrency","bitcoin","blockchain","crypto"]),shuffledHashTags2=shuffle(["jsecoin","jse","cryptomining","webmining","minecryptocurrency","minecrypto","fintech","webmasters","cryptocurrencies","tokensales","browsermining"]);socialURL="https://twitter.com/intent/tweet?url="+encodedAffLink+"&text="+encodeURI(shuffledTwitterText[0])+"&via=jsecoin&hashtags="+shuffledHashTags1[0]+","+shuffledHashTags2[0]}var socialWidth=$(window).width()/2,socialHeight=$(window).height()/2,socialTop=socialHeight/2,socialLeft=socialWidth/2;window.open(socialURL,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+socialWidth+",height="+socialHeight+",top="+socialTop+",left="+socialLeft)}function getCodeSiteID(newSite){launchModal("Copy and paste this code just above the closing &lt;/body&gt; tag",'<div class="breakword"><xmp class="codeformat" id="sitecode">'+('<script type="text/javascript">\n!function(){var e=document,t=e.createElement("script"),s=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=t.defer=!0,t.src="https://load.jsecoin.com/load/'+user.uid+"/"+newSite+'/optionalSubID/0/",s.parentNode.insertBefore(t,s)}();\n<\/script>')+'</xmp><br><hr><button class="btn btn-sm btn-primary" onclick="copyToClipboard(\'sitecode\'); $(this).addClass(\'animated tada\');">Copy to Clipboard</button> <span class="copiedresult"></span></</div>')}function fallbackSHA256(s,nonce,callback){function safe_add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function S(X,n){return X>>>n|X<<32-n}function R(X,n){return X>>>n}function Ch(x,y,z){return x&y^~x&z}function Maj(x,y,z){return x&y^x&z^y&z}function Sigma0256(x){return S(x,2)^S(x,13)^S(x,22)}function Sigma1256(x){return S(x,6)^S(x,11)^S(x,25)}function Gamma0256(x){return S(x,7)^S(x,18)^R(x,3)}function Gamma1256(x){return S(x,17)^S(x,19)^R(x,10)}callback(function(binarray){for(var hex_tab="0123456789abcdef",str="",i=0;i<4*binarray.length;i++)str+=hex_tab.charAt(binarray[i>>2]>>8*(3-i%4)+4&15)+hex_tab.charAt(binarray[i>>2]>>8*(3-i%4)&15);return str}(function(m,l){var a,b,c,d,e,f,g,h,T1,T2,K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),HASH=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),W=new Array(64);m[l>>5]|=128<<24-l%32,m[15+(l+64>>9<<4)]=l;for(var i=0;i<m.length;i+=16){a=HASH[0],b=HASH[1],c=HASH[2],d=HASH[3],e=HASH[4],f=HASH[5],g=HASH[6],h=HASH[7];for(var j=0;j<64;j++)W[j]=j<16?m[j+i]:safe_add(safe_add(safe_add(Gamma1256(W[j-2]),W[j-7]),Gamma0256(W[j-15])),W[j-16]),T1=safe_add(safe_add(safe_add(safe_add(h,Sigma1256(e)),Ch(e,f,g)),K[j]),W[j]),T2=safe_add(Sigma0256(a),Maj(a,b,c)),h=g,g=f,f=e,e=safe_add(d,T1),d=c,c=b,b=a,a=safe_add(T1,T2);HASH[0]=safe_add(a,HASH[0]),HASH[1]=safe_add(b,HASH[1]),HASH[2]=safe_add(c,HASH[2]),HASH[3]=safe_add(d,HASH[3]),HASH[4]=safe_add(e,HASH[4]),HASH[5]=safe_add(f,HASH[5]),HASH[6]=safe_add(g,HASH[6]),HASH[7]=safe_add(h,HASH[7])}return HASH}(function(str){for(var bin=Array(),i=0;i<8*str.length;i+=8)bin[i>>5]|=(255&str.charCodeAt(i/8))<<24-i%32;return bin}(s=function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}(s)),8*s.length))+","+nonce)}function textEncoderUTF8(str){if(window.TextEncoder)return new TextEncoder("utf-8").encode(str);for(var l=str.length,arr=new Uint8Array(l),i=0;i<l;i++)arr[i]=String(str).charCodeAt(i);return arr}function cryptoSha256(str,nonce){var buffer=textEncoderUTF8(str);return crypto.subtle.digest("SHA-256",buffer).then(function(hash){return hex(hash)+","+nonce})}function hex(buffer){for(var hexCodes=[],view=new DataView(buffer),i=0;i<view.byteLength;i+=4){var paddedValue=("00000000"+view.getUint32(i).toString(16)).slice(-"00000000".length);hexCodes.push(paddedValue)}return hexCodes.join("")}function stopMining(){$("#startminingbutton").removeClass("btn-success").addClass("btn-primary"),$("#startminingbutton").html('<i class="fa fa-gavel"></i> &nbsp; Start Mining'),$("#startminingbutton").attr("onclick","startMining(); $(this).addClass('animated tada');"),console.log("Cancelling mining operation..."),miningLog("Cancelling mining operation..."),setTimeout(function(){console.log("Cancelled mining operation..."),miningLog("Cancelled mining operation...")},5e3),quitMining=!0}function startMining(){function processHashV2(hashSubmissionString){sessionHashes++,window.JSEsocket.emit("submitHash",hashSubmissionString)}function variableDifficulty(n){for(var s="",i=n;i--;)s+="0";return s}function checkConnected(){window.jseMineV2?window.jseMineV2():setTimeout(function(){checkConnected()},1e3)}if(quitMining=!1,pX<10&&!1===app)return launchModal("Automated mining system detected.<br><br>If you are seeing this message in error please restart your browser.<br><br>It is currently not possible to use the self-mining platform with a headless browser or automated bot.<br><br>We have put these measures in place to prevent mining fraud."),setTimeout(function(){stopMining()},3e3),!1;!1===app&&($("#startminingbutton").removeClass("btn-primary").addClass("btn-success"),setTimeout(function(){$("#startminingbutton").html('<i class="fa fa-times"></i> &nbsp; Stop Mining')},1e3),$("#startminingbutton").attr("onclick","stopMining()")),window.JSEsocket.emit("startComs",2,function(authResponse){"badIP"===authResponse?(launchModal("VPN / VPS / Proxy / Tor IP Address Detected","Sorry it is not currently possible to mine from an anonymous IP address. This may be because you are connected to the internet via: <ul><li>A VPN (Virtual Private Network)</li><li>Anonymous Proxy</li><li>TOR Onion Router</li></ul>To start mining please disconnect from your VPN / Proxy / Tor connection and use a valid IP address.<br><br>We have put these measures in place to prevent mining fraud."),setTimeout(function(){stopMining()},3e3)):0==user.confirmed?(notify("You need to confirm your account before you start mining. Please check the email address provided and click the confirmation link in the welcome email."),setTimeout(function(){stopMining()},3e3)):console.log("Mining Coms Started Succesfully")}),window.hashesFoundThisBlock=0;var speedTestCount=0;window.jseMineV2=function(){if(quitMining)return!1;for(var found=!1,difficulty=4+hashesFoundThisBlock,hashingStarted=(new Date).getTime(),startNumber=Math.floor(99999999999*Math.random()),x=startNumber;x<=startNumber+hashRate&&!found;x++){var targetTextWithNonce=preHash+","+x;if(window.crypto&&window.crypto.subtle)cryptoSha256(targetTextWithNonce,x).then(function(hashNonce){hashNonce.substr(0,difficulty)===variableDifficulty(difficulty)&&(found=!0,hashesFoundThisBlock++,processHashV2(preHash+","+hashNonce+","+user.uid+","+user.jseUnique+",Platform Mining,0,"+appHash),console.log("Found Hash! : "+hashNonce),miningLog("<b>Found Hash! : "+hashNonce+"</b>"),$(".fa-puzzle-piece").addClass("animated flash fa-3x"),setTimeout(function(){$(".fa-puzzle-piece").removeClass("animated flash fa-3x")},1e3))});else fallbackSHA256(targetTextWithNonce,x,function(hashNonce){hashNonce.substr(0,difficulty)===variableDifficulty(difficulty)&&(found=!0,hashesFoundThisBlock++,processHashV2(preHash+","+hashNonce+","+user.uid+","+user.jseUnique+",Platform Mining,0,"+appHash),console.log("Found Hash! : "+hashNonce),miningLog("<b>Found Hash! : "+hashNonce+"</b>"),$(".fa-puzzle-piece").addClass("animated flash fa-3x"),setTimeout(function(){$(".fa-puzzle-piece").removeClass("animated flash fa-3x")},1e3))})}setTimeout(function(y){var hashingFinished=(new Date).getTime(),hashesCompleted=y-startNumber,hashingSeconds=(hashingFinished-hashingStarted)/1e3;if(hps=Math.floor(hashesCompleted/hashingSeconds),$("#hashrateacceleration").length){var hpa=1+$("#hashrateacceleration").val()/20;hashRate=hps*hpa}else hashRate=1.2*hps;hashRate<25&&(hashRate=25),hashRate>12e3&&(hashRate=12e3),5==++speedTestCount&&(speedTestCount=0,console.log("Hashrate Speed Test: "+hps+" hashes/sec"),miningLog("Hashrate Speed Test: "+hps+" hashes/sec")),window.jseMineV2()},1e3,x)},window.JSEsocket.emit("requestFirstPreHash","2"),shortMiningInterval(),!1===app&&longMiningInterval(),checkConnected()}function updateHashRateAcceleration(){var hashRateAcc=$("#hashrateacceleration").val();$(".range-value").html(hashRateAcc),hashRateAcc<=4&&$(".input-range").css("background-color","rgba(0, 0, 0, 0)"),hashRateAcc>=5&&$(".input-range").css("background-color","rgba(255, 190, 170, 1)"),hashRateAcc>=7&&$(".input-range").css("background-color","rgba(255, 50, 40, 1)"),hashRateAcc>=9&&$(".input-range").css("background-color","rgba(220, 0, 0, 1)"),localStorage.setItem("hashRateAccStored",hashRateAcc)}function viewLogins(){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/account/lastlogins/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data),targetHTML='<table class="table target-table"><tr><th>GEO</th><th>App</th><th>IP Address</th><th>Date</th><th>User Agent</th></tr>',reverseLogins=[];for(var key in returnObject)returnObject.hasOwnProperty(key)&&reverseLogins.push(returnObject[key]);reverseLogins.reverse();for(var i=0;i<reverseLogins.length;i++){var loginData=reverseLogins[i];targetHTML+='<tr><td><i class="fa fa-globe"></i> '+loginData.geo+"</td><td>"+loginData.app.charAt(0).toUpperCase()+loginData.app.slice(1)+"</td><td>"+loginData.ip+"</td><td>"+utcTS2local(Number(loginData.ts))+"</td><td>"+loginData.ua+"</td></tr>"}launchModal("Previous Logins",targetHTML+="</table>")}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function displayPurchase(reference){for(var i in user.merchantPurchases)user.merchantPurchases[i].reference==reference&&(delete user.merchantPurchases[i].actions,launchModal("Purchase Ref. "+reference,'<table class="table"><tr><td style="font-weight: bold;">'+JSON.stringify(user.merchantPurchases[i]).substring(2).slice(0,-2).replace(/":"?/g,"</td><td>").replace(/"?,"/g,'</td></tr><tr><td style="font-weight: bold;">')+"</table>"))}function deposit(){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/ethereum/getdepositaddress/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification),returnObject.success&&launchModal("Deposit ERC20 tokens to the platform",'Please send JSE ERC20 tokens to:<br><br><div id="deposit-address" class="generalbox full-width">'+returnObject.ethAddress+'</div><br><button class="btn btn-primary" onclick="copyToClipboard(\'deposit-address\');">Copy to Clipboard</button><br><br>We will query this address for one hour. If the transaction is taking longer just click deposit again, the address will not change. Do not send ETH to this address, only send JSE ERC20 tokens. Your account will automatically be credited within 30 minutes of funds being received.')}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function withdraw(){({}).session=user.session,launchModal("Withdraw tokens to an ERC20 address","Please enter the amount and wallet address where you would like to send tokens:<br><br>Account Balance: "+user.balance+' JSE<br><br><a href="javascript:void(0);" onclick="showTxLimit();">Daily Transaction Limit :'+user.txLimit+'JSE - (Click Here To Adjust)</a><br><br><table class="table"><tr><td>Amount</td><td><input type="text" id="withdrawal-amount" class="form-control w150" style="display: inline-block;" placeholder="0.000000" onchange="updateWithdrawalFees();" onkeyup="updateWithdrawalFees();" /> <img src="img/coin_gold.png" style="height: 24px; width: 24px;" alt="JSE" /></td></tr><tr><td>Fee</td><td><input type="text" id="withdrawal-fee" class="form-control w150" style="display: inline-block;" value="0" readonly /> <i class="fa fa-info-circle" style="color: #1B5794; cursor: pointer; font-size: 18px;" aria-hidden="true" onclick="notify(\'Fees for withdrawals are necessary because we have to pay Gas price to carry out transactions on the Ethereum network\');" data-toggle="tooltip" data-placement="top" title="Fees for withdrawals are necessary because we have to pay Gas price to carry out transactions on the Ethereum network"></i></td></tr><tr><td>Total</td><td><input type="text" id="withdrawal-total" class="form-control w150" value="0" readonly /> <span id="withdrawal-total-warning" style="color: #C00; font-size: 12px;"></span></td></tr><tr><td>Address</td><td><input type="text" id="withdrawal-address" class="form-control full-width" placeholder="0x..." /></td></tr></table><br><button class="btn btn-primary" onclick="submitWithdrawal();">Send</button><br><br>Please note withdrawals can take anything from a few minutes up to 24 hours.')}function updateWithdrawalFees(){var withdrawalValue=parseFloat($("#withdrawal-amount").val());$("#withdrawal-fee").val(118);var totalWithdrawalValue=withdrawalValue+118;if(withdrawalValue<0)return $("#withdrawal-amount").val(0),!1;totalWithdrawalValue>user.balance?($("#withdrawal-total").val(user.balance),$("#withdrawal-total-warning").html("Maximum available balance"),$("#withdrawal-amount").val(user.balance-118)):totalWithdrawalValue>user.txLimit?($("#withdrawal-total").val(user.txLimit),$("#withdrawal-total-warning").html('<a href="javascript:void(0);" onclick="showTxLimit();">Daily Transaction Limit :'+user.txLimit+"JSE - (Click Here To Adjust)</a>"),$("#withdrawal-amount").val(user.txLimit-118)):($("#withdrawal-total").val(totalWithdrawalValue),$("#withdrawal-total-warning").html(""))}function submitWithdrawal(){$("#tmpmodal").modal("hide"),checkPin(function(){var credentials={};credentials.session=user.session,credentials.withdrawalAmount=parseFloat($("#withdrawal-amount").val()),credentials.withdrawalAddress=$("#withdrawal-address").val().split(/[^a-zA-Z0-9]/).join(""),isEthAddress(credentials.withdrawalAddress)||(cancelPin(),notify("Withdrawal address is invalid, please use an ERC20 compatible wallet address")),credentials.pin=getPin(),$.ajax({url:jseServer+"/ethereum/withdraw/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification),returnObject.success&&launchModal("Confirm Withdrawal","Please check your email for a confirmation link to complete withdrawal.")}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})})}function cancelSubscription(reference){if(confirm("Are you sure you want to cancel this subscription? Ref. "+reference)){var credentials={};credentials.session=user.session,credentials.reference=reference,$.ajax({url:jseServer+"/checkout/cancel/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification),returnObject.success&&notify("Subscription reference: "+reference+" has been cancelled");var noUIDRef=reference.split("/")[1];void 0!==user.merchantSales[noUIDRef]?(user.merchantSales[noUIDRef].cancelledTS=(new Date).getTime(),loadMerchant()):void 0!==user.merchantPurchases[noUIDRef]&&(user.merchantPurchases[noUIDRef].cancelledTS=(new Date).getTime(),loadDashboard())}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}}function processMerchantOrder(reference){var credentials={};credentials.session=user.session,credentials.reference=reference,$.ajax({url:jseServer+"/checkout/process/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification)}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function setupTransfer(email,amount,reference){loadTransfer(),setTimeout(function(){$("#touser").val(email),$("#toamount").val(amount),$("#toreference").val(reference)},1e3)}function showTxLimit(){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/account/txtoday/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);if(returnObject.fail)notify(returnObject.notification);else{user.txLimit=returnObject.txLimit,$("#txLimit").html(user.txLimit);var txLeft=user.txLimit-returnObject.txToday;launchModal("Transaction Limits","Your current daily transaction limit is: "+user.txLimit+" JSE<br>Used: "+returnObject.txToday+" JSE - Remaining: "+txLeft+" JSE<br>Account Balance: "+user.balance+' JSE<br><br>We recommend keeping this as low as possible. You can adjust your transaction limit to any value<br>&gt; 10000 JSE Requires Email Link Confirmation<br>&gt; 100000 JSE Requires Email Confirmation and Admin Approval<br><br><table class="table"><tr><td>New Limit</td><td><input type="text" id="tx-limit-change" class="w150 mt5" placeholder="'+user.txLimit+'" /> JSE</td></tr><tr><td>Pin Number</td><td><input type="text" id="tx-limit-pin" class="w150 mt5 text-center jsefont" autocomplete="off" name="pinNumber" /></td></tr><tr><td></td><td><button class="btn btn-primary mt5" onclick="adjustTxLimit();">Adjust Transaction Limit</button></td></tr></table>')}})}function adjustTxLimit(){var credentials={};if(credentials.session=user.session,credentials.newTxLimit=$("#tx-limit-change").val(),credentials.newTxLimit>user.balance)return notify("You can not set a transaction limit above your current account balance"),!1;credentials.pin=$("#tx-limit-pin").val(),$.ajax({url:jseServer+"/account/updatetxlimit/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail?notify(returnObject.notification):returnObject.emailRequired?(notify("Please confirm the new daily transaction limit by clicking the secure link in the confirmation email sent to "+user.email),$("#tmpmodal").modal("hide")):($("#tmpmodal").modal("hide"),user.txLimit=credentials.newTxLimit,$("#txLimit").html(credentials.newTxLimit))}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function removeCoin(coinCode){var credentials={};credentials.session=user.session,credentials.coinCode=coinCode,confirm("Once removed from your account there will be no way to retrieve this code. Have you stored the coincode safely and are you sure you want to remove this coincode?")&&$.ajax({url:jseServer+"/account/removecoincode/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail&&notify(returnObject.notification),loadExport()}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function shortMiningInterval(){if(quitMining)return!1;if(hashRate>maxHashRate&&(maxHashRate=Math.round(hashRate)),hashRatePercentage=Math.round(hashRate/maxHashRate*100),$(".sessionhashes").html(sessionHashes),$(".maxhashrate").html(maxHashRate),$("#hashratechart").length){rawData.push(hashRatePercentage),rawData.length>100&&rawData.shift(),chartData=[];for(var i=0;i<rawData.length;i++)chartData.push([i,rawData[i]]);series[0].data=chartData,plot.setData(series),plot.draw()}0==quitMining&&$(".miningtable").length&&setTimeout(function(){shortMiningInterval()},1e3)}function redrawMiningPage(){var preEarnings=parseFloat($(".todayearnings").html());user.statsToday&&preEarnings<user.statsToday.c&&($(".fa-money").addClass("animated flash fa-3x"),setTimeout(function(){$(".fa-money").removeClass("animated flash fa-3x")},1e3)),calculatePendingTotal(),$(".pending-self-mining").html(user.pendingSelfMining),user.statsToday&&$(".todayearnings").html(user.statsToday.c),$(".sessionhashes").html(sessionHashes);var transactionTable="",reverseArray=[];for(var i in user.mining)reverseArray.push(user.mining[i]);for(i=reverseArray.length-1;i>=0;i--){var t=reverseArray[i];if(i==reverseArray.length-1){var lastReward=timeSince(new Date(t.ts));$("#lastReward").html("<h5>Last mining reward received "+lastReward+" ago</h5>");var now=new Date,statsReset=timeSince(new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,10,0));$(".stats-reset").html("Stats reset "+statsReset+" ago")}t.command&&"mining"==t.command&&"Platform Mining"==t.siteid&&(t.localTime=utcTS2local(t.ts),transactionTable+="<tr><td>"+t.localTime+'</td><td><img src="img/coin_gold.png" alt="" class="table-coin" /> '+t.value+" JSE</td><td>"+t.siteid+"</td></tr>")}$(".miningtable").html(transactionTable),$(".jsebalance").html(user.balance)}function longMiningInterval(){user&&redrawMiningPage(),Math.random()>.9&&$.ajax({url:jseServer+"/stats/",type:"GET",contentType:"application/json"}).done(function(data){publicStats=JSON.parse(data);var totalSelfMiners=0;for(var key in publicStats.clients)publicStats.clients[key].selfMinersCount&&(totalSelfMiners+=publicStats.clients[key].selfMinersCount);$(".selfMinersNow").html(totalSelfMiners)}),0==quitMining&&$(".miningtable").length&&setTimeout(function(){longMiningInterval()},6e4),!app&&!tabFocused&&hashRate<500&&($(".bannerframe").html("<h2>Try opening the platform in a separate browser window to avoid hash rate drop off from multiple tabs</h2>"),$(".bannerframe").attr("onclick","window.open('https://jsecoin.com/en/support/FAQ/')"),0==$("#JSE-nightMode").length?$(".bannerframe").css("background","#FFFFFF"):$(".bannerframe").css("background","#000000"),loadMiningBanner=function(){})}function miningLog(message){if(0!==$("#console").length&&($("#console").prepend("<p>"+message+"</p>"),$("#console").html($("#console").html().substr(0,1e3))),0!==$("#iframe-console").length&&$("#iframe-console").html("<p>"+message+"</p>"),!1!==app){var miningLogUpdate=new CustomEvent("miningLogUpdate",{detail:message});document.dispatchEvent(miningLogUpdate)}}function createHashRateChart(chartData){var container=$("#hashratechart");series=[{data:chartData,lines:{fill:!0}}];var hashRateChartBackground="#FFFFFF";0!==$("#JSE-nightMode").length&&(hashRateChartBackground="#000000"),plot=$.plot(container,series,{grid:{color:"#999999",tickColor:"#D4D4D4",borderWidth:0,minBorderMargin:20,labelMargin:10,backgroundColor:{colors:[hashRateChartBackground,hashRateChartBackground]},margin:{top:8,bottom:20,left:20},markings:function(axes){for(var markings=[],xaxis=axes.xaxis,x=Math.floor(xaxis.min);x<xaxis.max;x+=2*xaxis.tickSize)markings.push({xaxis:{from:x,to:x+xaxis.tickSize},color:hashRateChartBackground});return markings}},colors:["#1B5794"],xaxis:{min:0,max:100},yaxis:{min:0,max:100},legend:{show:!0}}),$(window).resize(function(){void 0!==plot&&(plot.resize(),plot.setupGrid(),plot.draw())})}function toggleEmailSettings(type){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/account/toggleemail/"+type+"/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var returnObject=JSON.parse(data);returnObject.fail?notify(returnObject.notification):"newsletter"==type?returnObject.turnedOn?($("#newsletterEmail").prop("checked",!0),user.noNewsletter=!1):returnObject.turnedOff&&($("#newsletterEmail").prop("checked",!1),user.noNewsletter=!0):"transaction"==type?returnObject.turnedOn?($("#transactionEmail").prop("checked",!0),user.noEmailTransaction=!1):returnObject.turnedOff&&($("#transactionEmail").prop("checked",!1),user.noEmailTransaction=!0):"globalresubscribe"==type&&returnObject.success&&notify("Your email has been removed from the global unsubscribe list")}).fail(function(data2){var failObj=JSON.parse(data2.responseText);return failObj&&failObj.notification&&notify(failObj.notification),!1})}function newCampaign(){launchModal("New Campaign",'<div id="adx-new-campaign-container"></div>'),$("#adx-new-campaign-container").load("adxcampaign.html",function(){})}function editCampaign(campaignID){var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/advertising/getcampaigns/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){user.campaigns=JSON.parse(data),launchModal("Edit Campaign",'<div id="adx-new-campaign-container"></div>'),$("#adx-new-campaign-container").load("adxcampaign.html",function(){injectCampaignData(campaignID)})})}function pauseCampaign(campaignID){var credentials={};credentials.session=user.session,credentials.cid=campaignID,$.ajax({url:jseServer+"/advertising/pausecampaign/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){notify("Changes to ad campaign may take up to five minutes to propagate"),loadAdExchange()})}function restartCampaign(campaignID){var credentials={};credentials.session=user.session,credentials.cid=campaignID,$.ajax({url:jseServer+"/advertising/restartcampaign/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){notify("Changes to ad campaign may take up to five minutes to propagate"),loadAdExchange()})}function archiveCampaign(campaignID){if(confirm("Are you sure you want to delete this campaign? All related stats data and campaign settings will be removed permanently.")){var credentials={};credentials.session=user.session,credentials.cid=campaignID,$.ajax({url:jseServer+"/advertising/archivecampaign/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){loadAdExchange()})}}function duplicateCampaign(campaignID){if(confirm("Are you sure you want to duplicate this campaign?")){var credentials={};credentials.session=user.session,credentials.cid=campaignID,$.ajax({url:jseServer+"/advertising/duplicatecampaign/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){loadAdExchange()})}}function loadAdxStats(thisID,pubOrAdv,what,sortedBy){var myAdxStats={};null===what?what=lastWhat:lastWhat=what,$(".adx-stats-tab").removeClass("active"),$("#adx-stats-tab-"+what).addClass("active"),"adv"===pubOrAdv?(thisID&&(currentCampaignID=thisID),$(".adx-current-campaign").html(user.campaigns[currentCampaignID].name)):(thisID&&(currentSiteID=thisID),$(".adx-current-siteid").html(currentSiteID),$("#pub-stats-datepicker").show(),$("#pub-stats-datetoggle").hide());var fromDate=datepicker2ymd($("#adx-from-datepicker").val()),toDate=datepicker2ymd($("#adx-to-datepicker").val());if("summary"===what){$("#adx-stats-th-what").html("Date"),myAdxStats="pub"===pubOrAdv?user.pubStats||{}:user.advStats||{};var tableHTML="";for(var ymd in myAdxStats)if(myAdxStats.hasOwnProperty(ymd)&&parseInt(ymd)>=parseInt(fromDate)&&parseInt(ymd)<=parseInt(toDate))if(myAdxStats[ymd]&&myAdxStats[ymd][currentSiteID]){var validated=Math.min(Math.round((myAdxStats[ymd][currentSiteID].v||0)/(myAdxStats[ymd][currentSiteID].i||0)*100)||0,100),ctr=Number((myAdxStats[ymd][currentSiteID].c||0)/(myAdxStats[ymd][currentSiteID].i||0)*100).toFixed(2);tableHTML+='<tr><td class="text-left">'+ymd+'</td><td class="text-center">'+(myAdxStats[ymd][currentSiteID].i||0)+'</td><td class="text-center">'+validated+'%</td><td class="text-center">'+(myAdxStats[ymd][currentSiteID].c||0)+'</td><td class="text-center">'+(ctr||0)+'%</td><td class="text-center">'+round(myAdxStats[ymd][currentSiteID].j||0)+"</td></tr>"}else if(myAdxStats[ymd]&&myAdxStats[ymd][currentCampaignID]){validated=Math.min(Math.round((myAdxStats[ymd][currentCampaignID].v||0)/(myAdxStats[ymd][currentCampaignID].i||0)*100)||0,100);var conversionStat='<td class="text-center">'+(myAdxStats[ymd][currentCampaignID].k||0)+"</td>";ctr=Number((myAdxStats[ymd][currentCampaignID].c||0)/(myAdxStats[ymd][currentCampaignID].i||0)*100).toFixed(2);tableHTML+='<tr><td class="text-left">'+ymd+'</td><td class="text-center">'+(myAdxStats[ymd][currentCampaignID].i||0)+'</td><td class="text-center">'+validated+'%</td><td class="text-center">'+(myAdxStats[ymd][currentCampaignID].c||0)+'</td><td class="text-center">'+(ctr||0)+"%</td>"+conversionStat+'<td class="text-center">'+round(myAdxStats[ymd][currentCampaignID].j||0)+"</td></tr>"}$("#adx-stats-table").html(tableHTML)}else{what&&$("#adx-stats-th-what").html(what.charAt(0).toUpperCase()+what.substr(1));var targetField;"pub"===pubOrAdv?"placements"===what?targetField="adxPubPlacements":"geos"===what?targetField="adxPubGeos":"domains"===what?targetField="adxPubDomains":"advIDs"===what?targetField="adxPubAdvIDs":"devices"===what?targetField="adxPubDevices":"subids"===what&&(targetField="adxPubSubIDs"):"creatives"===what?targetField="adxAdvCreatives":"geos"===what?targetField="adxAdvGeos":"domains"===what?targetField="adxAdvDomains":"pubIDs"===what?targetField="adxAdvPubIDs":"devices"===what?targetField="adxAdvDevices":"browsers"===what&&(targetField="adxAdvBrowsers");var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/advertising/stats/"+targetField+"/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var myAdxStats=data,targetFields={};for(var ymd in myAdxStats)if(myAdxStats.hasOwnProperty(ymd)&&parseInt(ymd)>=parseInt(fromDate)&&parseInt(ymd)<=parseInt(toDate))if(myAdxStats[ymd]&&myAdxStats[ymd][currentSiteID])for(var field in myAdxStats[ymd][currentSiteID])myAdxStats[ymd][currentSiteID].hasOwnProperty(field)&&(targetFields[field]||(targetFields[field]={i:0,v:0,c:0,k:0,j:0}),targetFields[field].i+=myAdxStats[ymd][currentSiteID][field].i||0,targetFields[field].v+=myAdxStats[ymd][currentSiteID][field].v||0,targetFields[field].c+=myAdxStats[ymd][currentSiteID][field].c||0,targetFields[field].k+=myAdxStats[ymd][currentSiteID][field].k||0,targetFields[field].j+=myAdxStats[ymd][currentSiteID][field].j||0);else if(myAdxStats[ymd]&&myAdxStats[ymd][currentCampaignID])for(var field in myAdxStats[ymd][currentCampaignID])myAdxStats[ymd][currentCampaignID].hasOwnProperty(field)&&(targetFields[field]||(targetFields[field]={i:0,v:0,c:0,k:0,j:0}),targetFields[field].i+=myAdxStats[ymd][currentCampaignID][field].i||0,targetFields[field].v+=myAdxStats[ymd][currentCampaignID][field].v||0,targetFields[field].c+=myAdxStats[ymd][currentCampaignID][field].c||0,targetFields[field].k+=myAdxStats[ymd][currentCampaignID][field].k||0,targetFields[field].j+=myAdxStats[ymd][currentCampaignID][field].j||0);var tableHTML="",sortableArray=[];for(var field in targetFields)targetFields.hasOwnProperty(field)&&sortableArray.push({field:field,value:targetFields[field][sortedBy]});sortableArray.sort(function(a,b){return b.value-a.value});for(var i=0;i<sortableArray.length;i++){field=sortableArray[i].field;var rowClass="",additionalButtons="";if("creatives"===what){var found=!1,campaignCreatives=user.campaigns[currentCampaignID].banners,formattedField='<a href="https://adx.jsecoin.com/'+field+'" target="_blank"><img src="https://adx.jsecoin.com/'+field+'" style="max-height: 50px;"></a>';if(user.campaigns[currentCampaignID].keywords){campaignCreatives=user.campaigns[currentCampaignID].keywords;formattedField=field}for(var i2=0;i2<campaignCreatives.length;i2++)campaignCreatives[i2].fileName!==field&&campaignCreatives[i2].keyword!==field||(found=!0,campaignCreatives[i2].paused&&(found="paused"));found?additionalButtons="paused"===found?'<button class="btn btn-primary btn-xs adx-table-button" style="background:#079F80;" onclick="toggleCreative(\''+currentCampaignID+"','"+field+"'); loadAdxStats('"+thisID+"','"+pubOrAdv+"','"+what+"','"+sortedBy+'\');"><i class="fa fa-play"></i></button> ':'<button class="btn btn-primary btn-xs adx-table-button" onclick="toggleCreative(\''+currentCampaignID+"','"+field+"'); loadAdxStats('"+thisID+"','"+pubOrAdv+"','"+what+"','"+sortedBy+'\');"><i class="fa fa-pause"></i></button> ':rowClass="adx-disabled-row"}else if("domains"===what&&"adv"===pubOrAdv){var blacklisted=!1;user.campaigns[currentCampaignID].domainBlacklist.indexOf(field)>-1&&(blacklisted=!0),blacklisted?(rowClass="adx-disabled-row",additionalButtons='<button class="btn btn-primary btn-xs adx-table-button" style="background:#079F80;" onclick="modifyBlacklist(\''+currentCampaignID+"','remove','domainBlacklist','"+field+"'); loadAdxStats('"+thisID+"','"+pubOrAdv+"','"+what+"','"+sortedBy+'\');"><i class="fa fa-play"></i></button> '):additionalButtons='<button class="btn btn-primary btn-xs adx-table-button" onclick="modifyBlacklist(\''+currentCampaignID+"','add','domainBlacklist','"+field+"'); loadAdxStats('"+thisID+"','"+pubOrAdv+"','"+what+"','"+sortedBy+'\');"><i class="fa fa-pause"></i></button> '}else if("pubIDs"===what){blacklisted=!1;user.campaigns[currentCampaignID].publisherBlacklist.indexOf(field)>-1&&(blacklisted=!0),blacklisted?(rowClass="adx-disabled-row",additionalButtons='<button class="btn btn-primary btn-xs adx-table-button" style="background:#079F80;" onclick="modifyBlacklist(\''+currentCampaignID+"','remove','publisherBlacklist','"+field+"'); loadAdxStats('"+thisID+"','"+pubOrAdv+"','"+what+"','"+sortedBy+'\');"><i class="fa fa-play"></i></button> '):additionalButtons='<button class="btn btn-primary btn-xs adx-table-button" onclick="modifyBlacklist(\''+currentCampaignID+"','add','publisherBlacklist','"+field+"'); loadAdxStats('"+thisID+"','"+pubOrAdv+"','"+what+"','"+sortedBy+'\');"><i class="fa fa-pause"></i></button> '}var conversionStat="";"pub"!==pubOrAdv&&(conversionStat='<td class="text-center">'+(targetFields[field].k||0)+"</td>");var ctr=Number((targetFields[field].c||0)/(targetFields[field].i||0)*100).toFixed(2),validated=Math.min(Math.round((targetFields[field].v||0)/(targetFields[field].i||0)*100)||0,100);tableHTML+='<tr class="'+rowClass+'"><td class="text-left">'+additionalButtons+(formattedField||field)+'</td><td class="text-center">'+(targetFields[field].i||0)+'</td><td class="text-center">'+(validated||0)+'%</td><td class="text-center">'+(targetFields[field].c||0)+'</td><td class="text-center">'+(ctr||0)+"%</td>"+conversionStat+'<td class="text-center">'+round(targetFields[field].j||0).toFixed(2)+"</td></tr>"}$("#adx-stats-table").html(tableHTML)})}}function toggleCreative(cid,creative){var credentials={};credentials.session=user.session,credentials.cid=cid,credentials.creative=creative,$.ajax({url:jseServer+"/advertising/togglecreative/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){var res=JSON.parse(data);if(res.success){if("banner"===res.creativeType)for(var i=0;i<user.campaigns[cid].banners.length;i+=1)user.campaigns[cid].banners[i].fileName===creative&&(user.campaigns[cid].banners[i].paused?user.campaigns[cid].banners[i].paused=!1:user.campaigns[cid].banners[i].paused=!0);else if("keyword"===res.creativeType)for(i=0;i<user.campaigns[cid].keywords.length;i+=1)user.campaigns[cid].keywords[i].keyword===creative&&(user.campaigns[cid].keywords[i].paused?user.campaigns[cid].keywords[i].paused=!1:user.campaigns[cid].keywords[i].paused=!0);console.log("Creative updated: "+creative)}})}function modifyBlacklist(cid,addSubtract,blacklist,field){var credentials={};credentials.session=user.session,credentials.cid=cid,credentials.addSubtract=addSubtract,credentials.blacklist=blacklist,credentials.field=field,$.ajax({url:jseServer+"/advertising/blacklist/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){JSON.parse(data).success&&("add"===addSubtract?user.campaigns[cid][blacklist]+=field+"\n":"remove"===addSubtract&&(user.campaigns[cid][blacklist]=user.campaigns[cid][blacklist].split(field+"\n").join("")),console.log("Blacklist updated: "+field))})}function loadDashboard(){currentPage="dashboard.html",checkAuth()&&$("#content").load("dashboard.html",function(){user.requirePin&&setTimeout(function(){launchModal("Set Account Pin Number",'<h3>You need to set a pin number</h3>Please note that pin numbers can not be recovered so please write it down and keep it somewhere safe in case you forget. If you lose your pin number you will not be able to withdraw or transfer funds from your account.<br><br>Pin numbers should be between 4 and 12 digits and only standard numbers 0-9.<br><br>Please enter your new pin:<br><br><input type="text" id="new-pin" class="w150c text-center" onkeyup="checkPinSafe();" placeholder="Enter new pin" autocomplete="off" name="new-pin" /><br><input type="text" id="new-pin2" class="w150c text-center mt5" placeholder="Re-enter pin" autocomplete="off" name="new-pin2" /><br><button class="btn btn-primary mt5" onclick="setPin();">Set New Pin Number</button><div style="font-weight: bold; font-size: 18px; margin-top: 5px;">'+warningSign+" Please write down this pin number as it can not be recovered "+warningSign+"</div>")},5e3)})}function loadFunds(){currentPage="funds.html",checkAuth()&&$("#content").load("funds.html",function(){})}function loadMerchant(){currentPage="merchant.html",checkAuth()&&$("#content").load("merchant.html",function(){})}function loadEnterprise(){currentPage="enterprise.html",checkAuth()&&$("#content").load("enterprise.html",function(){})}function loadTransfer(){currentPage="transfer.html",checkAuth()&&$("#content").load("transfer.html",function(){})}function loadExport(){currentPage="export.html",checkAuth()&&$("#content").load("export.html",function(){})}function loadMining(){currentPage="mining.html",checkAuth()&&$("#content").load("mining.html",function(){})}function loadPublishers(){currentPage="publishers.html";var credentials={};credentials.session=user.session,$.ajax({url:jseServer+"/account/pubstats/",type:"POST",contentType:"application/json",data:JSON.stringify(credentials)}).done(function(data){stats=JSON.parse(data),$("#content").load("publishers.html",function(){})})}function loadInvestors(){currentPage="investors.html",$("#content").load("investors.html",function(){$(".titletext").html("Investors")})}function loadSettings(){checkAuth()&&(currentPage="settings.html",$("#content").load("settings.html",function(){}))}function loadReferrals(){checkAuth()&&(currentPage="referrals.html",$("#content").load("referrals.html",function(){}))}function loadAdExchange(){currentPage="adexchange.html",$("#content").load("adexchange.html",function(){$(".titletext").html('<a href="javascript:void(0)" onclick="loadAdExchange();">Ad-Exchange</a>')})}function loadAdxCampaignStats(campaignID){currentPage="adxstats.html",currentCampaignID=campaignID,$("#content").load("adxstats.html",function(){loadAdxStats(currentCampaignID,"adv","summary","j")})}function loadPage(pageName){return"Register"==pageName?(currentPage="register.html",$("#content").load("register.html",function(){$(".titletext").html("Register"),get.email&&$("#newemail").val(cleanString(get.email))}),!1):"Login"==pageName?(currentPage="login.html",$("#content").load("login.html",function(){$(".titletext").html("Login")}),!1):"ResetPassword"==pageName?(currentPage="resetpassword.html",$("#content").load("resetpassword.html",function(){$(".titletext").html("Reset Password")}),!1):"Confirm"==pageName?(currentPage="confirm.html",$("#content").load("confirm.html",function(){$(".titletext").html("Confirm Account")}),!1):"Restore2FA"==pageName?(currentPage="restore2fa.html",$("#content").load("restore2fa.html",function(){$(".titletext").html("Restore 2FA")}),!1):"Lander"==pageName.substr(0,6)?(currentPage="lander"+pageName.substr(6,9)+".html",$("#content").load("lander"+pageName.substr(6,9)+".html",function(){$(".titletext").html("Register"),setTimeout(function(){$(".navbar-minimalize").click()},1e3)}),!1):void 0}var jseTestNet=jseTestNet||!1,app=app||!1;0==app&&window&&window.process&&window.process.type&&(app="desktop");var user=user||!1,stats={},lastRequestTime=0,locked=!1,appHash="849016FEE1",jseServer="https://server.jsecoin.com:443",jseLoadServer="https://load.jsecoin.com:443",jseAdXServer="https://adx.jsecoin.com:443",tabFocused=!0,currentPage="index.html",scriptLoadTS=(new Date).getTime(),pX=0,conversionTags='<iframe src="https://jsecoin.com/pixels.php?conversion=signup" frameborder="0" width="1" height="1" style="position: absolute; left: -150px;"></iframe>',sessionHashes=0,quitMining=!0,ioLoaded=!1,preHash="0",hashRate=1500,maxHashRate=hashRate,socketIOAddress="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js",rawData=[],chartData=[],series=[{data:0}],plot={},currentCampaignID=null,currentSiteID=null;window.onfocus=function(){tabFocused=!0},window.onblur=function(){tabFocused=!1},window.onbeforeunload=function(){delete window.user},$.ajaxSetup({cache:!1}),$(document).ajaxError(function(request,type,errorThrown){var ajaxErrorEvent=document.createEvent("Event");503===type.status?(notify("Server error, apologies we may be carrying out maintenance or experiencing very high demand. This error can also be caused by an adblocker or anti-virus software blocking our domain, please add an exception or disable the ad blocker/AV."),ajaxErrorEvent.initEvent("ajaxConnectionError",!0,!0),document.dispatchEvent(ajaxErrorEvent)):401===type.status?(ajaxErrorEvent.initEvent("ajaxCredentialsError",!0,!0),document.dispatchEvent(ajaxErrorEvent),notify("Credentials Error: "+type.responseText),setTimeout(function(){!1===app&&(document.location.href="https://platform.jsecoin.com")},4e3)):(ajaxErrorEvent.initEvent("ajaxGeneralError",!0,!0),document.dispatchEvent(ajaxErrorEvent))});var get=getQueryParams(document.location.search);get.testnet&&(jseTestNet=get.testnet),0==jseTestNet&&(window&&window.process&&window.process.type||"https:"!=location.protocol&&(location.href="https:"+window.location.href.substring(window.location.protocol.length))),"local"==jseTestNet&&(jseServer="http://localhost:81",jseLoadServer="http://localhost:81",jseAdXServer="http://localhost/jsecoin/github/server/static"),"remote"==jseTestNet&&(jseServer="https://testnet.jsecoin.com:443",jseLoadServer="https://testnet.jsecoin.com:443"),0==jseTestNet&&(ajaxTestConnection(jseServer,function(serverAlive){if(!serverAlive&&(console.log(jseServer+" Failed - Upgrading"),jseServer=atob("aHR0cHM6Ly9zZXJ2ZXIxLmpzZWNvaW4uY29tOjQ0Mw=="),!1!==app)){var jseServerUpdate=new CustomEvent("jseServerUpdate",{detail:jseServer});document.dispatchEvent(jseServerUpdate)}}),ajaxTestConnection(jseLoadServer,function(serverAlive){serverAlive||(console.log(jseLoadServer+" Failed - Upgrading"),jseLoadServer=atob("aHR0cHM6Ly9sb2FkMS5qc2Vjb2luLmNvbTo0NDM="))}));var warningSign='<img style="margin-top: -3px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAxMC8xMy8xOOpi2NMAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAADBElEQVQ4jZXOS2hcVRzH8e+5d2bu7TwybUwmcTATZ1ITmodKa5TEVhvaQqPEVk1UNARciZhFpAjtoj7wsWjpQlRIRLvTRUFFkCxEu9Hqwo2oRWhEpW2SWjrRzOPOnTv3nL+Lihttpj1wOH/4/86HnxIRmp1FpV5XkBgXmWsaFpEN7wnInB3btXZ2/97ym9DdLN8UPB13Pqp9+rHUFz+Tz9OpL5rlrY3af6DU3lsfm3zE3TZILL2FngfH98wr9fBGf64JKqXsnkJuoXvmaSgWYW2N/OhOevO5d3JKOTcMfgKHe2ZmClbMxctmqQ0NoTyfgZGRm1+K2K/eEPiaUl2F+0ZfbN+1GxyH0clJBiYmqGezdDhxtvXddugZpXqvGxxOJ+e3PvlUjEoV+vspXr7MhaUl9L59EIbc2dZu3bu5ZeG6wPeUGt968MAD8bYOyOUgHmdLKkXSdXEzGZiaIn7+Ijsy7buPWNbkhqBSKtqbv2U+P7wDCTWNwUEAUi0tuK6LBeiJCWRggN56wO3trW8ppdxrgqfSrUe7O93cn8deoJhtp2HbADiOgzEGgFDgj0PPc2b5Ah227jweT7zxv+ArSuXzhY7D6ZVfKe8cwxvcTlAqobVmenqa2dlZRAS/tI6+ewT7iUcJVv+iO+nMPa5U33/Au7q6FrqipahnRfFmX6ZRrRD4PsYYkskkANVqlSAICIpFWueO4N+UIulV1Wgq+e6/FUWEty1n/Kd7+uVKBjl3/Kj86DXk55VVOb9eloaI3P/QAWFTQpbLFbnk1eTc6iX5xQ/kmxPH5EOQU5tT8mwkclBEUM9B51Rf4csht9jvraxT334HjWweHQSIsrDsGGXPo1TxaG3L4Pl1Gtpg7CjexWWK335HPGpzJeYsnax6e9T7Mef08HDfWLK2RmAgrHpov05ohIY2hKFBUBhR1Pw62gihgTAEY1uYmEMYCkQsvqr5X0esoH7y+x9+S2g3kdbGiMFGyyaMCFrkn9dcnVUUbQvGErR9da9DAaRS8+u/17VZ/BuiQK+lnh+GwwAAAABJRU5ErkJggg==" alt="" />',jseTrack={};if(checkUser(),localStorage)if(get.utm_source&&(localStorage.setItem("utmSource",get.utm_source),document.cookie="utmSource="+get.utm_source+";domain=.jsecoin.com;path=/;expires=Thu, 18 Dec 2037 12:00:00 UTC;"),get.utm_campaign&&(localStorage.setItem("utmCampaign",get.utm_campaign),document.cookie="utmCampaign="+get.utm_campaign+";domain=.jsecoin.com;path=/;expires=Thu, 18 Dec 2037 12:00:00 UTC;"),get.utm_content&&(localStorage.setItem("utmContent",get.utm_content),document.cookie="utmContent="+get.utm_content+";domain=.jsecoin.com;path=/;expires=Thu, 18 Dec 2037 12:00:00 UTC;"),null===localStorage.getItem("jseUnique")){var jseUnique=randString(12);user.jseUnique=jseUnique,localStorage.setItem("jseUnique",jseUnique)}else user.jseUnique=localStorage.getItem("jseUnique");var userDataRefresh=document.createEvent("Event");userDataRefresh.initEvent("userDataRefresh",!0,!0);var refreshTime=9e5;checkForUser(),setInterval(function(){!1===quitMining&&!1===app&&(console.log("Restarting JSE Socket.IO and Mining at 30 min Intervals"),miningLog("Restarting JSE Socket.IO and Mining at 30 min Intervals"),quitMining=!0,"undefined"!=typeof JSEsocket&&(window.JSEsocket.disconnect(),window.JSEsocket.destroy(),setTimeout(function(){startSocketIOConnection()},5e3),setTimeout(function(){startMining()},15e3)))},18e5);var lastWhat="summary";get.register||get.registration?loadPage("Register"):get.login?loadPage("Login"):get.confirm?loadPage("Confirm"):get.lander?loadPage("Lander"+get.lander.split(/[^0-9]/).join("")):get.publishers?loadPublishers():loadPage("Login"),null!==localStorage.getItem("themeVal")&&-1==String(window.location).indexOf("checkout.html")&&($("#JSE-updateTheme i").attr("class","fa fa-sun-o"),$("<link />",{id:"JSE-nightMode",rel:"stylesheet",href:"css/themes/nightMode.css"}).appendTo("head")),!1===app&&$(document).ready(function(){function fix_height(){var heightWithoutNavbar=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",heightWithoutNavbar+"px")}0==$("#checkout-login-container").length&&($("#side-menu").metisMenu(),$("#JSE-updateTheme").on("click",function(){0===$("#JSE-nightMode").length?(localStorage.setItem("themeVal","nightMode"),$(this).find("i").attr("class","fa fa-sun-o"),$("<link />",{id:"JSE-nightMode",rel:"stylesheet",href:"css/themes/nightMode.css"}).appendTo("head")):(localStorage.removeItem("themeVal"),$(this).find("i").attr("class","fa fa-moon-o"),$("#JSE-nightMode").remove()),"mining.html"==currentPage&&(createHashRateChart(),0==$("#JSE-nightMode").length?$(".bannerframe").css("background","#FFFFFF"):$(".bannerframe").css("background","#000000"))}),$(".navbar-minimalize:not(.binded)").addClass("binded").click(function(){$("body").toggleClass("mini-navbar"),SmoothlyMenu()}),fix_height(),$(window).bind("load resize click scroll",function(){$("body").hasClass("body-small")||fix_height()}),$("[data-toggle=popover]").popover())}),window.SmoothlyMenu=function(){!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},100)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):$("#side-menu").removeAttr("style")},$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small"),$(this).width()<500&&$("#viewport").attr("content","user-scalable=no,width=500")}),console.log("\n#####################################\n#                                   #\n#               OOOOO               #\n#           OOOOO   OOOOO           #\n#          OOO         OOO          #\n#       o  OOO         OOO  o       #\n#     o    OOO         OOO    o     #\n#    o     OOO         OOO     o    #\n#           OOOOO   OOOOO           #\n#      OOOOO    OOOOO    OOOOO      #\n#  OOOOO   OOOOO     OOOOO   OOOOO  #\n# OOO         OOO   OOO         OOO #\n# OOO         OOO   OOO         OOO #\n# OOO         OOO   OOO         OOO #\n# OOO         OOO   OOO         OOO #\n#  OOOOO   OOOOO     OOOOO   OOOOO  #\n#      OOOOO             OOOOO      #\n#              o  o  o              #\n#                                   #\n#        _ ___ ___        _         #\n#     _ | | __| __|__ ___(_)___     #\n#    | || |__ | _|  _| _ | |   |    #\n#    |____|___|___|__|___|_|_|_|    #\n#                                   #\n#   DEVELOPERS! Get involved with   #\n#   the JSEcoin project.            #\n#                                   #\n#        https://jsecoin.com        #\n#                                   #\n#####################################\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \nInformation for developers:          \nhttps://developer.jsecoin.com        \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \nFound a bug?:                        \nhttps://jsecoin.com/oddJobs/bugBounty\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t Version 1.8.20            \n#####################################\n")});